import{S as $,o as xe,a as we,s as Q,b as Se,c as p,U as T,g as ee,d as t,e as ie,f as Re,h as Oe,i as Pe,j as Ie,p as ke,L as Ee,P as Ne,k as Ae,u as ve,B as Ce,R as De,l as ue,m as Te,n as ge,q as je,r as Le,t as Ye,v as fe,w as oe,x as Me,y as He,z as Be,A as ne,C as Fe,D as he,E as Qe,F as ce,G as Ue,H as be,I as q,J as _,K as H,M as te,N as g,O as me,Q as x,T as J,V,W as C,X as ye,Y as _e,Z as U,_ as Je,$ as Ge}from"./index-DGpm3imC.js";import{e as W,i as X,s as Ke}from"./attributes-BBN0B9Iy.js";function Z(n,f=null,h){if(typeof n!="object"||n===null||$ in n)return n;const N=Oe(n);if(N!==xe&&N!==we)return n;var v=new Map,m=Pe(n),w=Q(0);m&&v.set("length",Q(n.length));var O;return new Proxy(n,{defineProperty(c,e,r){(!("value"in r)||r.configurable===!1||r.enumerable===!1||r.writable===!1)&&Se();var a=v.get(e);return a===void 0?(a=Q(r.value),v.set(e,a)):p(a,Z(r.value,O)),!0},deleteProperty(c,e){var r=v.get(e);if(r===void 0)e in c&&v.set(e,Q(T));else{if(m&&typeof e=="string"){var a=v.get("length"),s=Number(e);Number.isInteger(s)&&s<a.v&&p(a,s)}p(r,T),de(w)}return!0},get(c,e,r){var i;if(e===$)return n;var a=v.get(e),s=e in c;if(a===void 0&&(!s||(i=ee(c,e))!=null&&i.writable)&&(a=Q(Z(s?c[e]:T,O)),v.set(e,a)),a!==void 0){var o=t(a);return o===T?void 0:o}return Reflect.get(c,e,r)},getOwnPropertyDescriptor(c,e){var r=Reflect.getOwnPropertyDescriptor(c,e);if(r&&"value"in r){var a=v.get(e);a&&(r.value=t(a))}else if(r===void 0){var s=v.get(e),o=s==null?void 0:s.v;if(s!==void 0&&o!==T)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return r},has(c,e){var o;if(e===$)return!0;var r=v.get(e),a=r!==void 0&&r.v!==T||Reflect.has(c,e);if(r!==void 0||ie!==null&&(!a||(o=ee(c,e))!=null&&o.writable)){r===void 0&&(r=Q(a?Z(c[e],O):T),v.set(e,r));var s=t(r);if(s===T)return!1}return a},set(c,e,r,a){var d;var s=v.get(e),o=e in c;if(m&&e==="length")for(var i=r;i<s.v;i+=1){var P=v.get(i+"");P!==void 0?p(P,T):i in c&&(P=Q(T),v.set(i+"",P))}s===void 0?(!o||(d=ee(c,e))!=null&&d.writable)&&(s=Q(void 0),p(s,Z(r,O)),v.set(e,s)):(o=s.v!==T,p(s,Z(r,O)));var y=Reflect.getOwnPropertyDescriptor(c,e);if(y!=null&&y.set&&y.set.call(a,r),!o){if(m&&typeof e=="string"){var Y=v.get("length"),l=Number(e);Number.isInteger(l)&&l>=Y.v&&p(Y,l+1)}de(w)}return!0},ownKeys(c){t(w);var e=Reflect.ownKeys(c).filter(s=>{var o=v.get(s);return o===void 0||o.v!==T});for(var[r,a]of v)a.v!==T&&!(r in c)&&e.push(r);return e},setPrototypeOf(){Re()}})}function de(n,f=1){p(n,n.v+f)}function Ze(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function pe(n){for(var f=ie,h=ie;f!==null&&!(f.f&(Ce|De));)f=f.parent;try{return ue(f),n()}finally{ue(h)}}function le(n,f,h,N){var S;var v=(h&Te)!==0,m=!ge||(h&je)!==0,w=(h&Le)!==0,O=(h&He)!==0,c=!1,e;w?[e,c]=Ie(()=>n[f]):e=n[f];var r=$ in n||Ye in n,a=((S=ee(n,f))==null?void 0:S.set)??(r&&w&&f in n?u=>n[f]=u:void 0),s=N,o=!0,i=!1,P=()=>(i=!0,o&&(o=!1,O?s=ve(N):s=N),s);e===void 0&&N!==void 0&&(a&&m&&ke(),e=P(),a&&a(e));var y;if(m)y=()=>{var u=n[f];return u===void 0?P():(o=!0,i=!1,u)};else{var Y=pe(()=>(v?fe:oe)(()=>n[f]));Y.f|=Ee,y=()=>{var u=t(Y);return u!==void 0&&(s=void 0),u===void 0?s:u}}if(!(h&Ne))return y;if(a){var l=n.$$legacy;return function(u,I){return arguments.length>0?((!m||!I||l||c)&&a(I?y():u),u):y()}}var d=!1,k=!1,A=Me(e),D=pe(()=>fe(()=>{var u=y(),I=t(A);return d?(d=!1,k=!0,I):(k=!1,A.v=u)}));return v||(D.equals=Ae),function(u,I){if(Be!==null&&(d=k,y(),t(A)),arguments.length>0){const R=I?t(D):m&&w?Z(u):u;return D.equals(R)||(d=!0,p(A,R),i&&s!==void 0&&(s=R),ve(()=>t(D))),u}return t(D)}}function ze(n){ne===null&&Ze(),ge&&ne.l!==null?Ve(ne).m.push(n):Fe(()=>{const f=ve(n);if(typeof f=="function")return f})}function Ve(n){var f=n.l;return f.u??(f.u={a:[],b:[],m:[]})}var We=x('<li class="svelte-pq1o7u"><p class="question-text svelte-pq1o7u"> </p> <p class="answer-text svelte-pq1o7u"> </p></li>'),Xe=x('<ul class="svelte-pq1o7u"></ul>'),$e=x('<p class="no-answers svelte-pq1o7u">No answers for this topic</p>'),et=x('<div class="result-card svelte-pq1o7u"><h2 class="svelte-pq1o7u"> </h2> <div class="percentage-bar svelte-pq1o7u"><div class="percentage-fill svelte-pq1o7u"></div></div> <p class="percentage-text svelte-pq1o7u"> </p> <p class="points-text svelte-pq1o7u"> </p> <div class="answers-section svelte-pq1o7u"><h3 class="svelte-pq1o7u">Supporting Answers:</h3> <!></div></div>'),tt=x('<p class="svelte-pq1o7u">You are most suited for <strong class="svelte-pq1o7u"> </strong></p>'),st=x('<strong class="svelte-pq1o7u"> </strong> and <strong class="svelte-pq1o7u"> </strong>',1),at=x('<strong class="svelte-pq1o7u"> </strong><!><!>',1),rt=x('<p class="svelte-pq1o7u">You are equally suited for <!></p>'),nt=x('<h2 class="svelte-pq1o7u">Conclusion</h2> <!>',1),lt=x('<div class="results-container svelte-pq1o7u"><h1 class="svelte-pq1o7u">Your Results</h1> <div class="results-grid svelte-pq1o7u"></div> <div class="conclusion svelte-pq1o7u"><!></div> <button class="restart-button svelte-pq1o7u">Start Over</button></div>');function it(n,f){he(f,!1);let h=le(f,"topicResults",28,()=>({})),N=le(f,"onRestart",8),v=le(f,"answerHistory",24,()=>[]);Qe(()=>(ce(h()),ce(v())),()=>{const a=Object.values(h()).reduce((s,o)=>s+o,0);h(Object.entries(h()).reduce((s,[o,i])=>(s[o]={count:i,percentage:a>0?Math.round(i/a*100):0,answers:v().filter(P=>P.topics.includes(o))},s),{}))}),Ue(),be();var m=lt(),w=q(_(m),2);W(w,5,()=>Object.entries(h()),X,(a,s)=>{let o=()=>t(s)[0],i=()=>t(s)[1];var P=et(),y=_(P),Y=_(y),l=q(y,4),d=_(l),k=q(l,2),A=_(k),D=q(k,2),S=q(_(D),2);{var u=R=>{var j=Xe();W(j,5,()=>i().answers,X,(b,E)=>{var L=We(),B=_(L),M=_(B),G=q(B,2),K=_(G);J(()=>{C(M,t(E).question),C(K,`You chose: ${t(E).answer??""}`)}),g(b,L)}),g(R,j)},I=R=>{var j=$e();g(R,j)};H(S,R=>{i().answers.length>0?R(u):R(I,!1)})}J(()=>{Ke(P,"style",`--percentage: ${i().percentage??""}%`),C(Y,o()),C(d,`${i().percentage??""}%`),C(A,`(${i().count??""} points)`)}),g(a,P)});var O=q(w,2),c=_(O);{var e=a=>{var s=nt();const o=oe(()=>Math.max(...Object.values(h()).map(l=>l.count))),i=oe(()=>Object.entries(h()).filter(([l,d])=>d.count===t(o)).map(([l])=>l));var P=q(V(s),2);{var y=l=>{var d=tt(),k=q(_(d)),A=_(k);J(()=>C(A,t(i)[0])),g(l,d)},Y=l=>{var d=rt(),k=q(_(d));{var A=S=>{var u=st(),I=V(u),R=_(I),j=q(I,2),b=_(j);J(()=>{C(R,t(i)[0]),C(b,t(i)[1])}),g(S,u)},D=S=>{var u=ye(),I=V(u);W(I,1,()=>t(i),X,(R,j,b)=>{var E=at(),L=V(E),B=_(L),M=q(L);{var G=F=>{var z=_e(",");g(F,z)};H(M,F=>{b<t(i).length-2&&F(G)})}var K=q(M);{var se=F=>{var z=_e("and");g(F,z)};H(K,F=>{b===t(i).length-2&&F(se)})}J(()=>C(B,t(j))),g(R,E)}),g(S,u)};H(k,S=>{t(i).length===2?S(A):S(D,!1)})}g(l,d)};H(P,l=>{t(i).length===1?l(y):l(Y,!1)})}g(a,s)};H(c,a=>{Object.entries(h()).length>0&&a(e)})}var r=q(O,2);te("click",r,function(...a){var s;(s=N())==null||s.apply(this,a)}),g(n,m),me()}var vt=x('<button class="survey-button svelte-1hpf26k"> </button>'),ot=x('<div class="survey-list svelte-1hpf26k"></div>'),ut=x("<p>No surveys available. Please add some surveys first.</p>"),ft=x('<div class="survey-selection svelte-1hpf26k"><h2 class="svelte-1hpf26k">Select a Survey</h2> <!></div>'),ct=x('<button class="svelte-1hpf26k"> </button>'),_t=x('<div class="question-container svelte-1hpf26k"><h3 class="svelte-1hpf26k"> </h3> <h2 class="svelte-1hpf26k"> </h2> <div class="button-container svelte-1hpf26k"></div> <div class="progress svelte-1hpf26k"> </div></div>'),dt=x('<div class="no-questions svelte-1hpf26k"><p>No questions available for this survey.</p> <button class="svelte-1hpf26k">Select Another Survey</button></div>'),pt=x('<div class="main-content svelte-1hpf26k"><!></div>'),gt=x('<main class="svelte-1hpf26k"><!></main>');function mt(n,f){he(f,!1);let h=U([]),N=U(null),v=U([]),m=U(0),w=U(),O=U({}),c=U(!1),e=U([]);ze(()=>{p(h,JSON.parse(localStorage.getItem("surveys")||"[]"))});const r=l=>{p(N,l);const d=JSON.parse(localStorage.getItem(`questions_${l}`)||"[]");p(v,d),p(w,t(v)[t(m)]);const k=JSON.parse(localStorage.getItem(`topics_${l}`))||[];p(O,k.reduce((A,D)=>(A[D]=0,A),{}))},a=(l,d)=>{t(e).push({question:t(w).question,answer:d,topics:l}),l.forEach(k=>{Je(O,t(O)[k]++)}),console.log("Current topic counts:",t(O)),s()},s=()=>{t(m)<t(v).length-1?(Ge(m),p(w,t(v)[t(m)])):p(c,!0)},o=()=>{p(N,null),p(c,!1),p(v,[]),p(m,0),p(w,null),p(e,[]),p(O,{})};be();var i=gt(),P=_(i);{var y=l=>{it(l,{get topicResults(){return t(O)},onRestart:o,get answerHistory(){return t(e)},get surveyName(){return t(N)}})},Y=l=>{var d=ye(),k=V(d);{var A=S=>{var u=ft(),I=q(_(u),2);{var R=b=>{var E=ot();W(E,5,()=>t(h),X,(L,B)=>{var M=vt(),G=_(M);J(()=>C(G,t(B))),te("click",M,()=>r(t(B))),g(L,M)}),g(b,E)},j=b=>{var E=ut();g(b,E)};H(I,b=>{t(h).length>0?b(R):b(j,!1)})}g(S,u)},D=S=>{var u=pt(),I=_(u);{var R=b=>{var E=_t(),L=_(E),B=_(L),M=q(L,2),G=_(M),K=q(M,2);W(K,5,()=>t(w).buttons,X,(z,ae)=>{var re=ct(),qe=_(re);J(()=>C(qe,t(ae).text)),te("click",re,()=>a(t(ae).selectedTopics,t(ae).text)),g(z,re)});var se=q(K,2),F=_(se);J(()=>{C(B,`Survey: ${t(N)??""}`),C(G,t(w).question),C(F,`Question ${t(m)+1} of ${t(v).length??""}`)}),g(b,E)},j=b=>{var E=dt(),L=q(_(E),2);te("click",L,o),g(b,E)};H(I,b=>{t(w)?b(R):b(j,!1)})}g(S,u)};H(k,S=>{t(N)?S(D,!1):S(A)},!0)}g(l,d)};H(P,l=>{t(c)?l(y):l(Y,!1)})}g(n,i),me()}export{mt as default};
